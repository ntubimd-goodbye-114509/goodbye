{% load static %}
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/css/shop_form.css/">
  <title>新增賣場</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">

  {% include 'common/header.html' %}
</head>
<body>
    <div class="container main-content">
        <h2 class="mb-4">新增賣場</h2>
      
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}
      
          <!-- 封面圖片區 -->
          <div class="mb-3">
            <label class="form-label">封面圖片（可多張）</label>
            {{ form.images }}
            {{ form.cover_index }}
            {{ form.image_order }}
            <button type="button" class="btn btn-sm btn-secondary mt-2">圖片自動切割</button>
          </div>
      
          <!-- 賣場基本資料 -->
          <div class="mb-3">
            <label class="form-label">賣場名稱</label>
            {{ form.name }}
          </div>
      
          <div class="mb-3">
            <label class="form-label">商品介紹</label>
            {{ form.introduce }}
          </div>
      
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">狀態</label>
              {{ form.shop_state }}
            </div>
            <div class="col-md-6">
              <label class="form-label">分配優先</label>
              {{ form.purchase_priority }}
            </div>
          </div>
      
          <!-- 根據狀態顯示時間欄位 -->

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">結束時間（結單日）</label>
              {{ form.end_time }}
            </div>
          </div>
      
          <div class="mb-3">
            <label class="form-label">權限</label>
            {{ form.permission }}
          </div>
      
          <div class="mb-3">
            <label class="form-label">啟用訂金</label>
            {{ form.deposit }}
          </div>
      
          <div class="mb-3">
            <label class="form-label">訂金比例 (%)</label>
            {{ form.deposit_ratio }}
          </div>
      
          <!-- 標籤區 -->
          <div class="mb-3">
            <label class="form-label">標籤（可新增）</label>
            <div class="d-flex flex-wrap gap-2 mb-2">
              {% for tag in predefined_tags %}
                <button type="button" class="btn btn-outline-primary btn-sm tag-option">{{ tag }}</button>
              {% endfor %}
            </div>
            <input type="text" id="tag-input" class="form-control mb-2" placeholder="輸入標籤並按 Enter">
            <div id="tag-list" class="mb-2"></div>
            {{ form.tag_names }}
          </div>
      
          <!-- 付款方式 -->
          <div class="mb-3">
            <label class="form-label">付款方式</label>
            {{ form.payment_ids }}
          </div>
      
          <!-- 商品區 -->
          <h4 class="mb-3">商品區塊（可多筆）</h4>
          <div id="product-area"></div>
          <button type="button" class="btn btn-outline-secondary" onclick="addProduct()">＋ 新增商品</button>
      
          <div class="d-flex justify-content-end gap-2 mt-4">
            <a class="btn btn-outline-secondary" href="{% url 'home' %}">取消</a>
            <button type="submit" class="btn btn-primary">確認</button>
          </div>
        </form>
      </div>
      
  <script src="/static/js/shop_from.js/"></script>
</body>
</html>
