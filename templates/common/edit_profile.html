<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>編輯個人資料</title>
    <link rel="stylesheet" href="/static/css/edit_profile.css">
</head>
<body>
    <div class="profile-edit-container">
        <h1>編輯個人資料</h1>

        <!-- 顯示訊息 -->
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- 頭像 -->
            <div class="form-group">
                <label>目前頭像：</label><br>
                {% if request.user.profile.avatar %}
                    <img src="{{ request.user.profile.avatar.url }}" alt="頭像" width="150">
                {% else %}
                    <img src="/static/img/Defuser.png" alt="預設頭像" width="150">
                {% endif %}
            </div>
            <div class="form-group">
                <label for="avatar">上傳新頭像：</label><br>
                <input type="file" name="avatar" id="avatar">
            </div>

            <!-- 使用者名稱 -->
            <div class="form-group">
                <label for="username">使用者名稱：</label><br>
                <input type="text" name="username" id="username" value="{{ request.user.username }}">
            </div>

            <!-- 暱稱 -->
            <div class="form-group">
                <label for="nickname">暱稱：</label><br>
                <input type="text" name="nickname" id="nickname" value="{{ request.user.profile.nickname }}">
            </div>

            <!-- 電子郵件 -->
            <div class="form-group">
                <label for="email">電子郵件：</label><br>
                <input type="email" name="email" id="email" value="{{ request.user.email }}">
            </div>

            <!-- 自我介紹 -->
            <div class="form-group">
                <label for="bio">自我介紹：</label><br>
                <textarea name="bio" id="bio" rows="5">{{ request.user.profile.bio }}</textarea>
            </div>

            <!-- 密碼修改 -->
            <div class="form-group">
                <label for="new_password">新密碼：</label><br>
                <input type="password" name="new_password" id="new_password">
            </div>

            <div class="form-group">
                <label for="confirm_password">確認新密碼：</label><br>
                <input type="password" name="confirm_password" id="confirm_password">
            </div>

            <!-- 提交按鈕 -->
            <div class="form-group">
                <button type="submit">儲存變更</button>
            </div>
        </form>
        <a href="{% url 'home' %}" class="Options">返回主頁</a>
    </div>
</body>
</html>
